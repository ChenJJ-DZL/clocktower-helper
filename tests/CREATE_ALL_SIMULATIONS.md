# 创建所有剧本测试文件说明

由于代码量非常大，我已经创建了：

1. ✅ **基础模板** (`simulation_base.js`) - 包含所有通用函数
2. ✅ **暗流涌动完整测试** (`simulation_trouble_brewing.test.js`) - 包含所有22个角色的完整能力

还需要创建：

3. ⏳ **暗月初升完整测试** (`simulation_bad_moon_rising.test.js`) - 需要实现所有角色
4. ⏳ **梦殒春宵完整测试** (`simulation_sects_violets.test.js`) - 需要实现所有角色
5. ⏳ **夜半狂欢完整测试** (`simulation_midnight_revelry.test.js`) - 需要实现所有角色
6. ⏳ **完整角色库测试** (`simulation_all_roles.test.js`) - 包含所有角色

## 每个测试文件需要实现的能力类型

### 1. 夜晚能力
- 首夜信息角色（如洗衣妇、图书管理员等）
- 每夜信息角色（如共情者、占卜师等）
- 每夜行动角色（如投毒者、僧侣等）
- 每夜选择角色（如管家、水手等）

### 2. 白天能力
- 主动能力（如猎手射击、造谣者声明等）
- 投票相关（如管家跟随主人投票）

### 3. 触发式能力
- 死亡触发（如守鸦人、贤者等）
- 提名触发（如贞洁者）
- 处决触发（如圣徒）

### 4. 被动能力
- 保护能力（如士兵、茶女等）
- 游戏结束条件（如镇长、主谋等）
- 变身能力（如红唇女郎、方古等）

## 实现建议

由于每个文件代码量会非常大（可能3000+行），建议：

1. 使用模块化结构，将角色能力实现分离到单独的函数
2. 使用配置文件定义每个剧本的角色列表
3. 复用基础模板中的通用函数

## 当前进度

- ✅ 基础模板已创建
- ✅ 暗流涌动测试已创建（包含所有22个角色）
- ⏳ 其他4个测试文件待创建

由于代码量非常大，建议分步实现，先确保暗流涌动的测试完整运行，然后逐步添加其他剧本。

